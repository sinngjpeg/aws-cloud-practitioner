{
    "Comment": "Fluxo de Processamento de Pedidos usando Step Functions e Lambda",
    "StartAt": "ValidarPedido",
    "States": {
        "ValidarPedido": {
            "Type": "Task",
            "Resource": "arn:aws:lambda:<REGIAO>:<ID_CONTA>:function:validarPedido",
            "Next": "RegistrarPedido",
            "Catch": [
                {
                    "ErrorEquals": [
                        "States.ALL"
                    ],
                    "Next": "NotificarErro"
                }
            ]
        },
        "RegistrarPedido": {
            "Type": "Task",
            "Resource": "arn:aws:lambda:<REGIAO>:<ID_CONTA>:function:registrarPedido",
            "Next": "ProcessarPagamento",
            "Catch": [
                {
                    "ErrorEquals": [
                        "States.ALL"
                    ],
                    "Next": "NotificarErro"
                }
            ]
        },
        "ProcessarPagamento": {
            "Type": "Task",
            "Resource": "arn:aws:lambda:<REGIAO>:<ID_CONTA>:function:processarPagamento",
            "Next": "NotificarSucesso",
            "Catch": [
                {
                    "ErrorEquals": [
                        "States.ALL"
                    ],
                    "Next": "NotificarErro"
                }
            ]
        },
        "NotificarSucesso": {
            "Type": "Task",
            "Resource": "arn:aws:lambda:<REGIAO>:<ID_CONTA>:function:NotificarSucesso",
            "End": true
        },
        "NotificarErro": {
            "Type": "Task",
            "Resource": "arn:aws:lambda:<REGIAO>:<ID_CONTA>:function:NotificarErro",
            "End": true
        }
    }
}